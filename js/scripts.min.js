// @license magnet:?xt=urn:btih:1f739d935676111cfff4b4693e3816e664797050&dn=gpl-3.0.txt GPL-3.0
document.addEventListener("DOMContentLoaded",(()=>{const e={body:document.body,blackScreen:document.querySelector(".black-screen"),musicIcon:document.querySelector(".music-icon"),cards:document.querySelectorAll(".card"),footer:document.querySelector(".footer")},t=new Audio;t.loop=!0,t.volume=0;let n=!1;const a=document.createElement("canvas");a.className="background-canvas",e.body.appendChild(a);const o=a.getContext("2d"),r="#83a598";let i=[],c=l(),s=c,d=!0,u=null;function l(){return window.innerWidth<768?70:120}function v(){a.width=window.innerWidth,a.height=window.innerHeight}function m(){return{x:Math.random()*a.width,y:Math.random()*a.height,r:4*Math.random()+1,vx:.6*(Math.random()-.5),vy:.6*(Math.random()-.5),a:.5*Math.random()+.4}}function g(){for(let e=i.length-1;e>=0;e--){const t=i[e];t.x+=t.vx,t.y+=t.vy,t.a-=.004,t.a<=0&&i.splice(e,1)}for(;i.length<s;)i.push(m())}function h(){o.clearRect(0,0,a.width,a.height);for(const e of i){o.globalAlpha=e.a;const t=o.createRadialGradient(e.x,e.y,0,e.x,e.y,e.r);t.addColorStop(0,r),t.addColorStop(1,"rgba(131,165,152,0)"),o.fillStyle=t,o.beginPath(),o.arc(e.x,e.y,e.r,0,2*Math.PI),o.fill()}o.globalAlpha=1}function f(){d&&(g(),h(),u=requestAnimationFrame(f))}function p(a=.1){n||(t.src="music/music.opus",t.load(),n=!0);const o=()=>{if(!t.paused)return;t.play().catch((()=>{})),c=l();let n=0;t.volume=n,requestAnimationFrame((function e(){n+=.003,t.volume=Math.min(n,a),s=Math.min(s+2,c),(t.volume<a||s<c)&&requestAnimationFrame(e)}))};t.readyState>=3?o():t.addEventListener("canplaythrough",o,{once:!0})}function y(){let e=t.volume;c=3,requestAnimationFrame((function n(){e-=.01,t.volume=Math.max(e,0),s=Math.max(s-3,c),t.volume>0||s>c?requestAnimationFrame(n):t.pause()}))}document.addEventListener("visibilitychange",(()=>{if("hidden"===document.visibilityState)d=!1,u&&(cancelAnimationFrame(u),u=null);else{d=!0,v(),f()}})),e.blackScreen.addEventListener("click",(()=>{e.blackScreen.style.opacity="0",p(),e.cards.forEach(((e,t)=>{setTimeout((()=>e.classList.add("visible")),0===t?0:100*t)})),e.musicIcon.classList.remove("hidden"),setTimeout((()=>{e.blackScreen.classList.add("hidden"),e.blackScreen.style.display="none",e.footer&&e.footer.classList.add("visible")}))})),e.musicIcon.addEventListener("click",(()=>{(t.paused?p:y)()})),window.addEventListener("resize",(()=>{c=l(),v()})),v(),f()}));
// @license-end
